<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Dự đoán huyết áp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h2>Dự đoán mức huyết áp & nguy cơ tăng huyết áp</h2>
        <form id="predictForm">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label>Nam giới</label>
                    <select class="form-control" name="male">
                        <option value="1">Có</option>
                        <option value="0">Không</option>
                    </select>
                </div>
                <div class="col-md-3 mb-3"><label>Tuổi</label><input type="number" name="age" class="form-control"
                        required></div>
                <div class="col-md-3 mb-3"><label>Hút thuốc hiện tại</label>
                    <select class="form-control" name="currentSmoker">
                        <option value="1">Có</option>
                        <option value="0">Không</option>
                    </select>
                </div>
                <div class="col-md-3 mb-3"><label>Số điếu/ngày</label><input type="number" name="cigsPerDay"
                        class="form-control"></div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3"><label>Thuốc huyết áp</label>
                    <select class="form-control" name="BPMeds">
                        <option value="1">Có</option>
                        <option value="0">Không</option>
                    </select>
                </div>
                <div class="col-md-3 mb-3"><label>Tiểu đường</label>
                    <select class="form-control" name="diabetes">
                        <option value="1">Có</option>
                        <option value="0">Không</option>
                    </select>
                </div>
                <div class="col-md-3 mb-3"><label>Tổng cholesterol</label><input type="number" name="totChol"
                        class="form-control"></div>
                <div class="col-md-3 mb-3"><label>Huyết áp tâm thu</label><input type="number" name="sysBP"
                        class="form-control"></div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3"><label>Huyết áp tâm trương</label><input type="number" name="diaBP"
                        class="form-control"></div>
                <div class="col-md-3 mb-3"><label>BMI</label><input type="number" name="BMI" class="form-control"></div>
                <div class="col-md-3 mb-3"><label>Nhịp tim</label><input type="number" name="heartRate"
                        class="form-control"></div>
                <div class="col-md-3 mb-3"><label>Glucose</label><input type="number" name="glucose"
                        class="form-control"></div>
            </div>
            <button type="submit" class="btn btn-primary">Dự đoán</button>
        </form>
        <div class="mt-4" id="result"></div>
    </div>

    <script>
        document.getElementById("predictForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());

            const res = await fetch("/api/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            const result = await res.json();
            document.getElementById("result").innerHTML = `<h4>Kết quả:</h4>
    <p>Mức huyết áp: ${result.BP_Level}</p>
    <p>Xác suất tăng huyết áp: ${result.Hypertension_Risk}</p>`;
        });
    </script>
</body>

</html>