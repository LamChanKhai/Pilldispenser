<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ƒêo Ch·ªâ S·ªë S·ª©c Kh·ªèe</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-teal-50 via-blue-50 to-indigo-100 text-gray-800 flex flex-col items-center">

  <!-- Menu -->
  <div id="menu-container"></div>
  <script>
    fetch("menu.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("menu-container").innerHTML = html;
        const socket = io();
        socket.on('pill/data/status', (status) => {
          const jsonStatus = JSON.parse(status);
          const wifiIcon = document.getElementById('wifi-status');
          if(!wifiIcon) console.log('wifiIcon not found');
          console.log(jsonStatus.status);
          if(jsonStatus.status === 'online') {
            wifiIcon.innerHTML = 'üì∂';
            wifiIcon.className = 'text-green-500 text-xl md:text-2xl animate-pulse';
            wifiIcon.title = 'ƒê√£ k·∫øt n·ªëi IoT';
          } else {
            wifiIcon.innerHTML = 'üì¥';
            wifiIcon.className = 'text-red-500 text-xl md:text-2xl';
            wifiIcon.title = 'M·∫•t k·∫øt n·ªëi IoT';
          }
        });
      });
    function toggleMenu() {
      const menu = document.getElementById('mobile-menu');
      if (menu) menu.classList.toggle('hidden');
    }
  </script>

  <!-- N·ªôi dung ch√≠nh -->
  <main class="mt-28 w-full max-w-5xl px-6 pb-16 flex flex-col items-center">
    <h1 class="text-3xl font-bold text-indigo-600 mb-10 tracking-wide text-center">
      ü©∫ ƒêo Ch·ªâ S·ªë Sinh H·ªçc C∆° Th·ªÉ
    </h1>

    <!-- 3 ch·ªâ s·ªë -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 w-full">
      <!-- Nhi·ªát ƒë·ªô -->
      <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl">
        <div class="text-5xl mb-3">üå°Ô∏è</div>
        <h2 class="text-lg font-semibold text-gray-700 mb-2">Nhi·ªát ƒë·ªô c∆° th·ªÉ</h2>
        <p id="tempValue" class="text-3xl font-bold text-blue-600">-- ¬∞C</p>
      </div>

      <!-- N·ªìng ƒë·ªô Oxi -->
      <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl">
        <div class="text-5xl mb-3">ü´Å</div>
        <h2 class="text-lg font-semibold text-gray-700 mb-2">Oxi trong m√°u (SpO‚ÇÇ)</h2>
        <p id="oxygenValue" class="text-3xl font-bold text-green-600">-- %</p>
      </div>

      <!-- Huy·∫øt √°p -->
      <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl">
        <div class="text-5xl mb-3">‚ù§Ô∏è</div>
        <h2 class="text-lg font-semibold text-gray-700 mb-2">Huy·∫øt √°p</h2>
        <p id="bpValue" class="text-3xl font-bold text-red-500">-- / -- mmHg</p>
      </div>
    </div>

    <!-- K·∫øt qu·∫£ chi ti·∫øt -->

  </main>

  <script>
    // GoÃ£i API /api/v1/measurement/:userId
    const userId = localStorage.getItem('userId');
    console.log(userId);
    fetch(`/api/v1/measurement/690583a8d3dde5f187c1cd58`)
      .then(res => res.json())
      .then(data => {
        console.log(data);
        document.getElementById("tempValue").textContent = data.temp + " ¬∞C";
        document.getElementById("oxygenValue").textContent = data.spo2 + " %";
        document.getElementById("bpValue").textContent = data.heart_beat + " bpm";
      });
  </script>
</body>
</html>
